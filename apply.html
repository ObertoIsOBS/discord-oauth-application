<!DOCTYPE html>
<html>

<head>
    <title id="mainTitle">Application</title>
</head>

<body>

    <script src="https://cdn.obs.wtf/js/require.min.js"></script>
    <script>
        window.onload = async () => {
        const config = require("./config.json");
            
            if (!window.location.href.split("?") || !window.location.href.split("?")[1].split("&")) return window.location.href = '/api/callback';
            
            document.getElementById("mainTitle").innerText = config.title;
            document.getElementById("lowerTitle").innerText = config.title;
            
            document.getElementById("formFrame").src = config.formLink;
            
            var params = new Map();

            var arr = window.location.href.split("?")[1].split("&");

            arr.forEach(item => {
                params.set(item.split("=")[0], item.split("=")[1]);
            });

            var id = params.get("id");

            var elem = document.getElementById("codeItem");

            elem.innerText = id;
            
        }
    </script>
    
    <style>
        div {
            text-align: center;
            align-content: center;
            justify-content: center;
            width: 100%
        }

        body {
            font-family: 'Courier New';
        }
    </style>
    <div>
        <h1 id="lowerTitle">Apply</h1>
        <h3>Your code: <span id="codeItem" style="color: crimson;"></span></h3>
        <hr>
        <iframe
            id="formFrame"
            src=""
            width="640" height="1733" frameborder="0" marginheight="0" marginwidth="0">Loadingâ€¦</iframe>
    </div>
</body>

</html>
